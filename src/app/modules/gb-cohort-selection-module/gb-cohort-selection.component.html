<div>
  <!-- top panel -->
  <div class="container form-inline top-panel">
    <input id="cohortName" type="text"
           class="form-control save-input"
           placeholder="Specify cohort name"
           (drop)="preventNodeDrop($event)"
           [(ngModel)]="cohortName">
    <button class="btn btn-outline-primary btn-sm save-btn"
            (click)="saveCohort()"
            type="button">
      <span *ngIf="isSavingCohortCompleted">Save cohort</span>
      <span *ngIf="!isSavingCohortCompleted">Saving...</span>
    </button>

    <button type="button"
            (click)="update($event)"
            class="btn btn-outline-primary btn-sm update-btn
                      {{isDirty? 'update-btn-dirty' : ''}}">
      <span *ngIf="isUpdating">Updating cohort...</span>
      <span *ngIf="!isUpdating">Update cohort</span>
    </button>

    <button type="button"
            (click)="showContactModal($event)"
            class="btn btn-outline-seconday btn-sm contact-btn">
      <span *ngIf="isContacting">Contacting cohort...</span>
      <span *ngIf="!isContacting">Contact cohort</span>
    </button>

    <p-dialog modal="true" header="Contact Cohort" [(visible)]="isContacting"
      [style]="{width: '30vw'}"
    >
      <span class="ui-float-label">
        <textarea id="float-input" pInputTextArea [(ngModel)]="contactSynopsis"></textarea>
        <label for="float-input">Study Synopsis</label>
      </span>
      <p-footer>
        <button type="button" (click)="contact($event)" class="btn btn-outline-primary btn-sm">
          Contact
        </button>
      </p-footer>
    </p-dialog>

  </div>

  <!-- cohort query composer -->
  <div>
    <div #criteriaBox class="criteria-box">

      <div class="subject-count-box">
        <span><b>Summary: </b></span>
        <span>{{subjectCount}} subjects match your selection.</span>
        <i class="fa fa-info" (mouseenter)="op.show($event)"></i>
      </div>

      <gb-constraint #rootConstraintComponent
                     [constraint]="rootConstraint"
                     [isRoot]="true"></gb-constraint>
    </div>
  </div>

  <p-overlayPanel #op
                  [dismissable]="true"
                  [showCloseIcon]="false"
                  [style]="{'background':'#339C90', 'width': '50%'}">
    <div class="gb-cohort-selection-information-text">
      To define a cohort for which you want to select data,
      either drag nodes from the tree into an "add criterion" box, or use the box directly to add criteria to
      your selection. The box consists of an autocomplete text input field and a dropdown list that contains all the
      possible criteria options.
      When you are done adding criteria, please click the “Update cohort” button
      to get feedback about your group size, or to submit your selection before advancing. For more details regarding
      the cohort creation see
      <a href="http://glowingbear.app/docs/">the&nbsp;User&nbsp;Manual</a>.
    </div>
  </p-overlayPanel>


</div>
